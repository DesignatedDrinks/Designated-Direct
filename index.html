<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Designated Direct - Variety Packs</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 20px auto;
        padding: 0 20px;
      }
      .filter-container {
        margin-bottom: 20px;
      }
    </style>
  </head>
  <body>
    <h1>Choose a Variety Pack</h1>

    <div class="filter-container">
      <label for="varietyFilter">Select Variety Pack: </label>
      <select id="varietyFilter">
        <!-- Options will be populated by JavaScript -->
      </select>
    </div>

    <div id="selectedPack">Loading data...</div>

    <script>
      // Your Google Sheets details
      const spreadsheetId = 'YOUR_SPREADSHEET_ID'; // e.g., '1TtRNmjsgC64jbkptnCdklBf_HqifwE9SQO2JlGrp4Us'
      const apiKey = 'YOUR_API_KEY';
      
      // "PackTitles" is the tab name; A2:A covers column A from row 2 to row 1000
      const range = "PackTitles!A2:A";
      const encodedRange = encodeURIComponent(range);
      const url = `https://sheets.googleapis.com/v4/spreadsheets/${spreadsheetId}/values/${encodedRange}?key=${apiKey}`;

      // Fetch the list of variety packs from the sheet
      fetch(url)
        .then(response => response.json())
        .then(data => {
          console.log(data); // Debug the entire response
          const selectedPackDiv = document.getElementById('selectedPack');
          const varietyFilter = document.getElementById('varietyFilter');

          // Check if data exists
          if (!data.values || data.values.length === 0) {
            selectedPackDiv.textContent = 'No variety packs found!';
            return;
          }

          // Clear the "Loading data..." text
          selectedPackDiv.textContent = 'Please select a variety pack above.';

          // data.values is an array of arrays. Each sub-array has one element (the title)
          data.values.forEach(row => {
            const packTitle = row[0]; // The only column in this row
            const option = document.createElement('option');
            option.value = packTitle;
            option.textContent = packTitle;
            varietyFilter.appendChild(option);
          });

          // Event listener for dropdown changes
          varietyFilter.addEventListener('change', function() {
            selectedPackDiv.textContent = `You selected: ${this.value}`;
          });
        })
        .catch(error => {
          console.error('Error fetching data:', error);
          document.getElementById('selectedPack').textContent = 'Failed to load data.';
        });
    </script>
  </body>
</html>
